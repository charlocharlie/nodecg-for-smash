<!DOCTYPE html>
<html>
<head>
	<script src="components/webcomponentsjs/webcomponents-lite.min.js"></script>
	<script src="components/jquery/dist/jquery.min.js"></script>
	<script src="js/countrycodes.js"></script>
	<script src="js/characters.js"></script>
	<script src="components/mootools/dist/mootools-core.min.js"></script>
	<script src="js/FancySelect.js"></script>

	<link href="css/FancySelect.css" rel="stylesheet">
	<link href="css/players.css" rel="stylesheet">

	<link rel="import" href="components/polymer/polymer.html">
	<link rel="import" href="components/paper-input/paper-input.html">
	<link rel="import" href="components/paper-dropdown-menu/paper-dropdown-menu.html">
	<link rel="import" href="components/paper-menu/paper-menu.html">
	<link rel="import" href="components/paper-item/paper-item.html">
	<link rel="import" href="components/paper-button/paper-button.html">
	<link rel="import" href="components/paper-toggle-button/paper-toggle-button.html">
	<link rel="import" href="components/paper-card/paper-card.html">
	<!--<link rel="import" href="components/iron-flex-layout/classes/iron-flex-layout.html">-->
	<link rel="import" href="components/iron-flex-layout/iron-flex-layout-classes.html">
	<!--<link rel="import" href="components/iron-flex-layout/iron-flex-layout.html">-->
	<link rel="import" href="components/iron-icons/iron-icons.html">
	<link rel="import" href="components/nodecg-toggle/nodecg-toggle.html">

</head>

<body>
<datalist id="64-characters">
	<option value="None">
	<option value="Pikachu">
	<option value="Kirby">
	<option value="Captain Falcon">
	<option value="Fox">
	<option value="Yoshi">
	<option value="Jigglypuff">
	<option value="Mario">
	<option value="Samus">
	<option value="Donkey Kong">
	<option value="Ness">
	<option value="Link">
	<option value="Luigi">
</datalist>

<datalist id="melee-characters">
	<option value="None">
	<option value="Fox">
	<option value="Falco">
	<option value="Marth">
	<option value="Sheik">
	<option value="Jigglypuff">
	<option value="Peach">
	<option value="Ice Climbers">
	<option value="Captain Falcon">
	<option value="Pikachu">
	<option value="Samus">
	<option value="Dr. Mario">
	<option value="Yoshi">
	<option value="Luigi">
	<option value="Ganondorf">
	<option value="Mario">
	<option value="Young Link">
	<option value="Donkey Kong">
	<option value="Link">
	<option value="Mr. Game &amp; Watch">
	<option value="Roy">
	<option value="Mewtwo">
	<option value="Zelda">
	<option value="Ness">
	<option value="Pichu">
	<option value="Bowser">
	<option value="Kirby">
</datalist>

<!-- http://pmunderground.net/index.php/articles/9-articles/45-introducing-the-new-pmbr-and-pm-tier-list-2 -->
<datalist id="pm-characters">
	<option value="None">
	<option value="Diddy Kong">
	<option value="Meta Knight">
	<option value="Fox">
	<option value="Wolf">
	<option value="Mr. Game &amp; Watch">
	<option value="Sheik">
	<option value="Captain Falcon">
	<option value="Wario">
	<option value="Zero Suit Samus">
	<option value="Mewtwo">
	<option value="Snake">
	<option value="R.O.B.">
	<option value="Marth">
	<option value="Lucas">
	<option value="Lucario">
	<option value="Falco">
	<option value="Peach">
	<option value="Toon Link">
	<option value="Ness">
	<option value="Sonic">
	<option value="Ike">
	<option value="Roy">
	<option value="Samus">
	<option value="Mario">
	<option value="Donkey Kong">
	<option value="Luigi">
	<option value="Pikachu">
	<option value="Ice Climbers">
	<option value="Ivysaur">
	<option value="Squirtle">
	<option value="Link">
	<option value="Charizard">
	<option value="Jigglypuff">
	<option value="Zelda">
	<option value="Ganondorf">
	<option value="King Dedede">
	<option value="Olimar">
	<option value="Yoshi">
	<option value="Pit">
	<option value="Kirby">
	<option value="Bowser">
	<option value="Pokemon Trainer">
</datalist>

<!-- http://smashboards.com/threads/4br-smash-for-wii-u-tier-list-v2-0.440779/ -->
<datalist id="wiiu-characters">
	<option value="None">
	<option value="Diddy Kong">
	<option value="Cloud">
	<option value="Sheik">
	<option value="Rosalina &amp; Luma">
	<option value="Mario">
	<option value="Sonic">
	<option value="Fox">
	<option value="Zero Suit Samus">
	<option value="Ryu">
	<option value="Mewtwo">
	<option value="Bayonetta">
	<option value="Pikachu">
	<option value="Meta Knight">
	<option value="Villager">
	<option value="Mega Man">
	<option value="Ness">
	<option value="Toon Link">
	<option value="Corrin">
	<option value="Marth">
	<option value="Captain Falcon">
	<option value="Greninja">
	<option value="Lucario">
	<option value="Yoshi">
	<option value="Pit">
	<option value="Donkey Kong">
	<option value="Peach">
	<option value="Dark Pit">
	<option value="R.O.B.">
	<option value="Luigi">
	<option value="Olimar">
	<option value="Robin">
	<option value="Bowser">
	<option value="Lucas">
	<option value="Wario">
	<option value="Ike">
	<option value="Lucina">
	<option value="Mr. Game &amp; Watch">
	<option value="Pac-Man">
	<option value="Little Mac">
	<option value="Palutena">
	<option value="Kirby">
	<option value="Duck Hunt">
	<option value="Link">
	<option value="Shulk">
	<option value="Samus">
	<option value="Wii Fit Trainer">
	<option value="Bowser Jr.">
	<option value="Dr. Mario">
	<option value="Falco">
	<option value="Roy">
	<option value="Charizard">
	<option value="King Dedede">
	<option value="Zelda">
	<option value="Ganondorf">
	<option value="Jigglypuff">
	<option value="Mii Brawler">
	<option value="Mii Gunner">
	<option value="Mii Swordfighter">
</datalist>

<datalist id="countries">
<option value="None">
<option value="United States">
<option value="Canada">
<option value="Sweden">
<option value="Mexico">
<option value="Japan">
<option value="United Kingdom">
<option value="France">
<option value="Germany">
<option value="Netherlands">
<option value="Spain">
<option value="Norway">
<option value="Denmark">
<option value="Finland">
<option value="Afghanistan">
<option value="Åland Islands">
<option value="Albania">
<option value="Algeria">
<option value="American Samoa">
<option value="Andorra">
<option value="Angola">
<option value="Anguilla">
<option value="Antarctica">
<option value="Antigua and Barbuda">
<option value="Argentina">
<option value="Armenia">
<option value="Aruba">
<option value="Australia">
<option value="Austria">
<option value="Azerbaijan">
<option value="Bahamas">
<option value="Bahrain">
<option value="Bangladesh">
<option value="Barbados">
<option value="Belarus">
<option value="Belgium">
<option value="Belize">
<option value="Benin">
<option value="Bermuda">
<option value="Bhutan">
<option value="Bolivia">
<option value="Bonaire, Sint Eustatius and Saba">
<option value="Bosnia and Herzegovina">
<option value="Botswana">
<option value="Bouvet Island">
<option value="Brazil">
<option value="British Indian Ocean Territory">
<option value="Brunei Darussalam">
<option value="Bulgaria">
<option value="Burkina Faso">
<option value="Burundi">
<option value="Cambodia">
<option value="Cameroon">
<option value="Cape Verde">
<option value="Cayman Islands">
<option value="Central African Republic">
<option value="Chad">
<option value="Chile">
<option value="China">
<option value="Christmas Island">
<option value="Cocos (Keeling) Islands">
<option value="Colombia">
<option value="Comoros">
<option value="Congo">
<option value="Congo, Democratic Republic">
<option value="Cook Islands">
<option value="Costa Rica">
<option value="Côte d'Ivoire">
<option value="Croatia">
<option value="Cuba">
<option value="Curaçao">
<option value="Cyprus">
<option value="Czech Republic">
<option value="Djibouti">
<option value="Dominica">
<option value="Dominican Republic">
<option value="Ecuador">
<option value="Egypt">
<option value="El Salvador">
<option value="Equatorial Guinea">
<option value="Eritrea">
<option value="Estonia">
<option value="Ethiopia">
<option value="Falkland Islands (Malvinas)">
<option value="Faroe Islands">
<option value="Fiji">
<option value="French Guiana">
<option value="French Polynesia">
<option value="French Southern Territories">
<option value="Gabon">
<option value="Gambia">
<option value="Georgia">
<option value="Ghana">
<option value="Gibraltar">
<option value="Greece">
<option value="Greenland">
<option value="Grenada">
<option value="Guadeloupe">
<option value="Guam">
<option value="Guatemala">
<option value="Guernsey">
<option value="Guinea">
<option value="Guinea-Bissau">
<option value="Guyana">
<option value="Haiti">
<option value="Heard Island and McDonald Islands">
<option value="Holy See (Vatican City State)">
<option value="Honduras">
<option value="Hong Kong">
<option value="Hungary">
<option value="Iceland">
<option value="India">
<option value="Indonesia">
<option value="Iran, Islamic Republic of">
<option value="Iraq">
<option value="Ireland">
<option value="Isle of Man">
<option value="Israel">
<option value="Italy">
<option value="Jamaica">
<option value="Jersey">
<option value="Jordan">
<option value="Kazakhstan">
<option value="Kenya">
<option value="Kiribati">
<option value="North Korea">
<option value="South Korea">
<option value="Kuwait">
<option value="Kyrgyzstan">
<option value="Lao People's Democratic Republic">
<option value="Latvia">
<option value="Lebanon">
<option value="Lesotho">
<option value="Liberia">
<option value="Libya">
<option value="Liechtenstein">
<option value="Lithuania">
<option value="Luxembourg">
<option value="Macao">
<option value="Macedonia">
<option value="Madagascar">
<option value="Malawi">
<option value="Malaysia">
<option value="Maldives">
<option value="Mali">
<option value="Malta">
<option value="Marshall Islands">
<option value="Martinique">
<option value="Mauritania">
<option value="Mauritius">
<option value="Mayotte">
<option value="Micronesia, Federated States of">
<option value="Moldova">
<option value="Monaco">
<option value="Mongolia">
<option value="Montenegro">
<option value="Montserrat">
<option value="Morocco">
<option value="Mozambique">
<option value="Myanmar">
<option value="Namibia">
<option value="Nauru">
<option value="Nepal">
<option value="New Caledonia">
<option value="New Zealand">
<option value="Nicaragua">
<option value="Niger">
<option value="Nigeria">
<option value="Niue">
<option value="Norfolk Island">
<option value="Northern Mariana Islands">
<option value="Oman">
<option value="Pakistan">
<option value="Palau">
<option value="Palestinian Territory, Occupied">
<option value="Panama">
<option value="Papua New Guinea">
<option value="Paraguay">
<option value="Peru">
<option value="Philippines">
<option value="Pitcairn">
<option value="Poland">
<option value="Portugal">
<option value="Puerto Rico">
<option value="Qatar">
<option value="Réunion">
<option value="Romania">
<option value="Russian Federation">
<option value="Rwanda">
<option value="Saint Barthelemy">
<option value="Saint Helena">
<option value="Saint Kitts and Nevis">
<option value="Saint Lucia">
<option value="Saint Martin">
<option value="Saint Pierre and Miquelon">
<option value="Saint Vincent and the Grenadines">
<option value="Samoa">
<option value="San Marino">
<option value="Sao Tome and Principe">
<option value="Saudi Arabia">
<option value="Senegal">
<option value="Serbia">
<option value="Seychelles">
<option value="Sierra Leone">
<option value="Singapore">
<option value="Slovakia">
<option value="Slovenia">
<option value="Solomon Islands">
<option value="Somalia">
<option value="South Africa">
<option value="South Georgia and the South Sandwich Islands">
<option value="South Sudan">
<option value="Sri Lanka">
<option value="Sudan">
<option value="Suriname">
<option value="Svalbard and Jan Mayen">
<option value="Swaziland">
<option value="Switzerland">
<option value="Syrian Arab Republic">
<option value="Taiwan">
<option value="Tajikistan">
<option value="Tanzania">
<option value="Thailand">
<option value="Timor-Leste">
<option value="Togo">
<option value="Tokelau">
<option value="Tonga">
<option value="Trinidad and Tobago">
<option value="Tunisia">
<option value="Turkey">
<option value="Turkmenistan">
<option value="Turks and Caicos Islands">
<option value="Tuvalu">
<option value="Uganda">
<option value="Ukraine">
<option value="United Arab Emirates">
<option value="United States Minor Outlying Islands">
<option value="Uruguay">
<option value="Uzbekistan">
<option value="Vanuatu">
<option value="Venezuela">
<option value="Viet Nam">
<option value="Virgin Islands, British">
<option value="Virgin Islands, U.S.">
<option value="Wallis and Futuna">
<option value="Western Sahara">
<option value="Yemen">
<option value="Zambia">
<option value="Zimbabwe">
</datalist>

<datalist id="players"></datalist>

<style is="custom-style" include="iron-flex iron-flex-factors">
paper-button.indigo {
    background-color: #283593;
    color: white;
}
paper-button.red {
	background-color: #C62828;
	color: white;
}
paper-button.grey {
	background-color: #757575;
	color: white;
}
</style>



<dom-module name="teams-score" attributes="number">
	<style is="custom-style" include="iron-flex iron-flex-factors">
		paper-card {
			--paper-card-header-text: {
				text-align: center;
				font-size: 20px;
				padding: 8px 8px 0 8px;
			}
		}
		paper-button {
			--paper-button: {
				background-color: #757575;
				color: white;
			}
		}
	</style>
	<template>
		<paper-card class="flex" elevation=1 style="padding-right: 5px; padding-left:5px;" heading="Team {{number}}">
			<div class="horizontal layout">
				<div class="flex-4" style="padding-right:6px; padding-top:10px;">
					<paper-button raised style="width: 100%" id="ssbm-team{{number}}Swap" >Swap</paper-button>
				</div>
				<div class="flex-2" style="padding-right:2px; padding-left:2px;">
					<paper-dropdown-menu id="ssbm-team{{number}}Grands" label="GF W/L" always-float-label>
						<paper-menu class="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="{{grands}}">
							<paper-item value="none"></paper-item>
							<paper-item value="winners">W</paper-item>
							<paper-item value="losers">L</paper-item>
						</paper-menu>
					</paper-dropdown-menu>
				</div>
				<div class="flex" style="padding-left:2px; padding-right:6px;">
					<paper-input id="ssbm-team{{number}}Score" type="number" value="{{score}}" label="Score"></paper-input>
				</div>
			</div>
		</paper-card>
	</template>
	<script>
	window.addEventListener('WebComponentsReady', function(e) {
		Polymer({
			is: 'teams-score',
			ready: function() {
				this.score = 0;
				this.grands = 'none';
			},
			getScore: function() {
				return this.score;
			},
			setScore: function(score) {
				this.score = score;
			},
			getGrands: function() {
				return this.grands;
			},
			setGrands: function(grands) {
				this.grands = grands;
			}
		})
	});
	</script>
</dom-module>

<dom-module name="player-info" attributes="player">
	<style include="iron-flex iron-flex-factors"></style>
	<template>
		<paper-card class="flex" elevation=1 style="padding-right: 5px; padding-left:5px;">
			<div class="horizontal layout">
				<div class="flex-2" style="padding-right:2px">
					<paper-dropdown-menu id="ssbm-p{{player}}Sponsor" label="Sponsor" always-float-label>
						<paper-menu class="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="{{sponsor}}">
							<paper-item value="none"></paper-item>
							<template is="dom-repeat" items="{{teams}}">
								<paper-item value="{{item}}">{{item}}</paper-item>
							</template>
						</paper-menu>
					</paper-dropdown-menu>
				</div>
				<div class="flex-4" style="padding-left:2px;padding-right:2px">
					<paper-input class="player-tags" id="ssbm-p{{player}}Tag" label="Player {{player}} Tag" list="players" autocomplete="on" value="{{tag}}" always-float-label on-input="tagInputHandler"></paper-input>
				</div>
				<div class="flex" style="padding-left:2px;padding-right:2px">
					<paper-input class="player-score" id="ssbm-p{{player}}Score" type="number" label="Score" value="{{score}}" always-float-label></paper-input>
				</div>
			</div>
			<div class="horizontal layout">
				<div class="flex-7" style="padding-right:2px">
					<paper-input id="ssbm-p{{player}}Char" label="Player {{player}} Character" list="melee-characters" autocomplete="on" size="59" class="character-select" value="{{character}}" always-float-label on-input="changeHandler"></paper-input>
				</div>
				<div class="flex-2" style="padding-left:2px; padding-right:2px; padding-top:28px">
					<select name="char-costume-p{{player}}" id="char-costume-p{{player}}">
						<option value="1"></option>
					</select>
				</div>
				<div class="flex-2" style="padding-left:2px;">
					<paper-dropdown-menu id="ssbm-p{{player}}Grands" label="GF W/L" always-float-label class="grands-select-2p">
						<paper-menu class="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="{{grands}}">
							<paper-item value="none"></paper-item>
							<paper-item value="winners">W</paper-item>
							<paper-item value="losers">L</paper-item>
						</paper-menu>
					</paper-dropdown-menu>
				</div>
			</div>
			<paper-input id="ssbm-p{{player}}Flag" label="Player {{player}} Country" list="countries" autocomplete="on" value="{{flag}}" always-float-label></paper-input>
		</paper-card>
	</template>
	<script>
	window.addEventListener('WebComponentsReady', function(e) {
		Polymer({
			is: 'player-info',
			properties: {
				player: String
			},
			ready: function() {
				this.score = 0;
				this.teams = [];
				this.sponsor = "none";
				this.grands = "none";
				document.querySelector("#char-costume-p" + this.player ).fancySelect({
					showText: false,
					showImages: true,
					className: 'fancy-select',
					autoHide: true
				});
			},
			getTag: function() {
				return this.tag;
			},
			setTag: function(tag) {
				this.tag = tag;
			},
			getScore: function() {
				return this.score;
			},
			setScore: function(score) {
				this.score = score;
			},
			getCharacter: function() {
				return this.character;
			},
			setCharacter: function(character) {
				this.character = character;
			},
			getFlag: function() {
				return this.flag;
			},
			setFlag: function(flag) {
				this.flag = flag;
			},
			setTeams: function(teams) {
				this.splice('teams', 0, this.teams.length);
				for (var i=0; i < teams.length; i++) {
					this.push('teams', teams[i].name);
				}
			},
			getSponsor: function() {
				return this.sponsor;
			},
			setSponsor: function(sponsor) {
				this.sponsor = sponsor;
			},
			getGrands: function() {
				return this.grands;
			},
			setGrands: function(grands) {
				this.grands = grands;
			},
			changeHandler: function() {
				var costumeRep = nodecg.Replicant('costumeRep', {defaultValue: [] });
				costumeRep.value[this.player - 1] = this.character;
			},
			tagInputHandler: function() {
				var tagInputRep = nodecg.Replicant('tagInputRep', {defaultValue: [] });
				tagInputRep.value[this.player - 1] = this.tag;
			},
			getCostume: function() {
				return document.getElementById("char-costume-p" + this.player ).value;
			},
			setCostume: function(costumeNum) {
				var costume = document.getElementById("char-costume-p" + this.player);
				var fancy = costume.get('fancySelect');
				fancy.select(costumeNum);
			}
		});
	});

	</script>
</dom-module>

<div class="layout horizontal center">
	<nodecg-toggle replicant-name="twoPlayerValue" class="flex" id="ssbm-players-toggle" >Singles Mode</nodecg-toggle>
	<paper-button raised class="flex" id="manage-team-icons" nodecg-dialog="manage-teams">Manage Sponsor Icons</paper-button>
</div>
</br>
<div class="layout horizontal teams" style="display:none">
	<teams-score number="1" id="team1" class="flex" style="padding-right:3px;"></teams-score>
	<teams-score number="2" id="team2" class="flex" style="padding-left:3px;"></teams-score>
</div>
<hr class="teams" style="display:none">
<div class="layout horizontal" id="p1p2">
	<player-info player="1" id="player1" style="padding-right:3px;"></player-info>
	<player-info player="2" id="player2" style="padding-left:3px;"></player-info>
</div>
<div class="layout horizontal" id="p3p4" style="display:none">
	<player-info player="3" id="player3" style="padding-right:3px;"></player-info>
	<player-info player="4" id="player4" style="padding-left:3px;"></player-info>
</div>
<hr>
<div class="layout horizontal">
	<div class="flex" style="padding-left:2px;padding-right:2px">
		<paper-button raised class="flex red" id="ssbm-clear-fields" style="width: 100%">Clear All</paper-button>
	</div>
	<div class="flex-4" style="padding-left:2px;padding-right:2px">
		<paper-button raised class="indigo flex" id="ssbm-players-update" style="width: 100%">Update</paper-button>
	</div>
</div>
</br>
<div class="layout horizontal">
	<paper-button raised class="grey flex" id="ssbm-players-swap">Swap players</paper-button>
</div>

<script src="js/players.js"></script>
</body>
</html>
